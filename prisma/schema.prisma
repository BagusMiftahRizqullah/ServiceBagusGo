generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum SubscriptionType {
  free
  daily
  monthly
  yearly
}

model User {
  id                      String           @id @default(uuid())
  phone_number            String           @unique
  name                    String?
  password                String
  trial_start_date        DateTime?
  trial_end_date          DateTime?
  subscription_type       SubscriptionType @default(free)
  subscription_start_date DateTime?
  subscription_end_date   DateTime?
  created_at              DateTime         @default(now())
  updated_at              DateTime         @updatedAt

  savedAddresses          SavedAddress[]

  @@index([phone_number])
}

model SavedAddress {
  id         Int      @id @default(autoincrement())
  address    String
  lat        Decimal
  lng        Decimal
  userId     String   @map("user_id")
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt

  @@index([userId])
  @@map("saved_addresses")
}
